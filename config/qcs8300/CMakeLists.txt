cmake_minimum_required(VERSION 3.1)

project(config-qcs8300)

# Check whether GBM header is present.
include(CheckIncludeFile)
check_include_file("gbm_priv.h" HAVE_GBM_H)

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DTARGET_ION_ABI_VERSION=2")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DFLUSH_RESTART_NOTAVAILABLE")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DDISABLE_OP_MODES")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DQCAMERA3_TAG_LOCAL_COPY")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DCAM_ARCH_V2")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DJPEG_BLOB_OFFSET=0")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DHFR_THRESHOLD=120")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DUSE_FPS_IDX")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DDISABLE_RESCALER_COLORSPACE")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DCAMERA_HAL_API_VERSION=0x0307")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DCAMX_ANDROID_API=33")

set(JPEG_LIB camera/components/com.qti.offline.jpeg.so.0)

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DJPEG_POSTPROC_LIB=\"\\\"${JPEG_LIB}\\\"\"")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DEIS_MODES_ENABLE")

set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DVHDR_MODES_ENABLE")

set(ENABLE_OFFLINE_JPEG "0" PARENT_SCOPE)

if(HAVE_GBM_H)
set(USE_LIBGBM "1" PARENT_SCOPE)
set(PLATFORM_CXX_FLAGS "${PLATFORM_CXX_FLAGS} -DUSE_LIBGBM")
else()
set(USE_LIBGBM "0" PARENT_SCOPE)
endif()

set(DISABLE_RESCALER_COLORSPACE "1" PARENT_SCOPE)

set(CAMERA_CLIENT_DISABLED "1" PARENT_SCOPE)

if(BUILD_CATEGORY STREQUAL "BASE" OR BUILD_CATEGORY STREQUAL "ALL")

set(CAMERAADAPTOR_ENABLED "1" PARENT_SCOPE)
set(QMMF_UTILS_ENABLED "1" PARENT_SCOPE)
set(RESIZER_FASTCV_ENABLED "0" PARENT_SCOPE)
set(RESIZER_NEON_ENABLED "0" PARENT_SCOPE)
set(MEMORY_ENABLED "1" PARENT_SCOPE)

endif()

if(BUILD_CATEGORY STREQUAL "RECORDER" OR BUILD_CATEGORY STREQUAL "ALL")

set(RECORDER_CLIENT_ENABLED "1" PARENT_SCOPE)
set(RECORDER_SERVICE_ENABLED "1" PARENT_SCOPE)

endif()

if(BUILD_CATEGORY STREQUAL "SERVER" OR BUILD_CATEGORY STREQUAL "ALL")

set(QMMF_SERVER_ENABLED "1" PARENT_SCOPE)

endif()

if(BUILD_CATEGORY STREQUAL "TESTS" OR BUILD_CATEGORY STREQUAL "ALL")

set(RECORDER_GTEST_ENABLED "1" PARENT_SCOPE)
set(CAMERAADAPTOR_GTEST_ENABLED "1" PARENT_SCOPE)

endif()

set(PLATFORM_CXX_FLAGS ${PLATFORM_CXX_FLAGS} PARENT_SCOPE)

set(ENABLE_CAMERA_FACTORY_TEST TRUE)
